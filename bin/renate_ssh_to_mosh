#!/usr/bin/env ruby

require 'fileutils'

def error
  puts "USAGE: #{__FILE__} available_symlink_to_ssh_command_to_change"
  exit
end

if ARGV.length != 1
  error
end

path = `which #{ARGV[0]}`.strip
if path == nil || path.length == 0
  error
end

data = `ls -als #{path}`
if data =~ /ssh-to-gtisc\.gatech\.edu/
  # do processing
  `rm #{path}`
  FileUtils.symlink 'mosh-to-gtisc.gatech.edu', path
end
